{% extends "base.html" %}
{% load static %}

{% block content %}
<h2>Add Questions to {{ test.title }}</h2>
<form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <label for="question_text">Question</label>
    <textarea name="question_text" required></textarea>
    <br>
    
    <label for="question_type">Question Type</label>
    <select name="question_type" required>
        <option value="text">Open-ended</option>
        <option value="multiple_choice">Multiple Choice</option>
        <option value="image">Image-based</option>
    </select>
    <br>
    
    <div id="image_field" style="display:none;">
        <label for="image">Upload Image</label>
        <input type="file" name="image">
    </div>
    
    <div id="multiple_choice_field" style="display:none;">
        <label>Multiple Choice Answers</label>
        <div>
            <input type="text" name="answers[]" placeholder="Answer 1">
            <input type="checkbox" name="correct_answers[]" value="Answer 1"> Correct
        </div>
        <div>
            <input type="text" name="answers[]" placeholder="Answer 2">
            <input type="checkbox" name="correct_answers[]" value="Answer 2"> Correct
        </div>
        <!-- Add more as needed -->
    </div>
    
    <button type="submit">Add Question</button>
</form>

<script>
// JavaScript to show/hide fields based on question type
document.querySelector('[name="question_type"]').addEventListener('change', function () {
    const selectedType = this.value;
    document.getElementById('image_field').style.display = (selectedType === 'image') ? 'block' : 'none';
    document.getElementById('multiple_choice_field').style.display = (selectedType === 'multiple_choice') ? 'block' : 'none';
});
</script>

{% endblock %}